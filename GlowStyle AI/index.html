<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GlowStyle AI - Rizky Muslimin as Yube</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;800&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Plus Jakarta Sans', sans-serif; }
        .color-dot { transition: all 0.3s ease; }
        .color-dot:hover { transform: scale(1.1); }
        #video, #canvas { transform: scaleX(-1); border-radius: 1.5rem; }
        .gradient-bg { background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%); }
        .creator-footer { background: rgba(255, 255, 255, 0.8); backdrop-filter: blur(10px); }
    </style>
</head>
<body class="bg-slate-50 text-slate-900 flex flex-col min-h-screen">

    <header class="p-6 bg-white shadow-sm sticky top-0 z-10 border-b border-indigo-50">
        <div class="max-w-5xl mx-auto flex justify-between items-center">
            <h1 class="text-xl font-extrabold tracking-tighter text-indigo-600">GLOWSTYLE <span class="text-slate-400">AI</span></h1>
            <div class="text-[10px] bg-indigo-600 text-white px-3 py-1 rounded-full font-bold uppercase tracking-tighter">Powered by Yube AI</div>
        </div>
    </header>

    <main class="max-w-5xl mx-auto p-4 md:p-8 flex-grow">
        <div class="grid lg:grid-cols-2 gap-12 items-start">
            
            <div class="space-y-6">
                <div class="relative bg-slate-200 rounded-[2rem] overflow-hidden shadow-2xl aspect-[3/4] max-w-sm mx-auto flex items-center justify-center border-4 border-white">
                    <video id="video" autoplay playsinline class="w-full h-full object-cover"></video>
                    <canvas id="canvas" class="hidden absolute inset-0 w-full h-full object-cover"></canvas>
                    <div id="guide" class="absolute border-2 border-white/40 border-dashed rounded-[45%] w-2/3 h-1/2 pointer-events-none"></div>
                </div>

                <div class="flex gap-4 max-w-sm mx-auto">
                    <button id="captureBtn" class="flex-1 gradient-bg text-white font-bold py-4 rounded-2xl shadow-lg hover:brightness-110 transition-all active:scale-95">
                        Analisis Warna Sekarang
                    </button>
                    <button id="resetBtn" class="hidden px-6 bg-white text-slate-600 font-bold py-4 rounded-2xl shadow-md border border-slate-200 hover:bg-slate-50 transition-all">
                        Ulangi
                    </button>
                </div>
            </div>

            <div id="resultArea" class="hidden space-y-6 animate-in fade-in slide-in-from-bottom duration-700">
                <div class="bg-white p-8 rounded-[2.5rem] shadow-2xl shadow-indigo-100 border border-indigo-50 relative overflow-hidden">
                    <div class="absolute -right-4 -top-4 opacity-5 pointer-events-none rotate-12">
                        <h1 class="text-6xl font-black">YUBE</h1>
                    </div>

                    <div class="flex items-center justify-between mb-8">
                        <div>
                            <p class="text-[10px] font-bold text-indigo-400 uppercase tracking-[0.2em] mb-1">Personal Palette</p>
                            <h2 id="skinToneLabel" class="text-3xl font-extrabold text-slate-800">---</h2>
                        </div>
                        <div id="swatch" class="w-16 h-16 rounded-2xl shadow-inner border-4 border-white"></div>
                    </div>

                    <div class="p-6 bg-slate-50 rounded-3xl mb-8 border border-slate-100">
                        <h3 class="text-xs font-bold mb-4 text-slate-400 uppercase tracking-widest text-center">Rekomendasi Warna Pakaian</h3>
                        <div id="palette" class="grid grid-cols-5 gap-3">
                            </div>
                    </div>

                    <div class="bg-indigo-50/50 p-6 rounded-2xl">
                        <h3 class="text-xs font-bold text-indigo-600 uppercase mb-2 italic underline">Catatan Gaya:</h3>
                        <p id="fashionTips" class="text-sm text-slate-600 leading-relaxed"></p>
                    </div>
                    
                    <p class="mt-6 text-[10px] text-center text-slate-400 italic font-medium uppercase tracking-widest">
                        Analisis oleh Rizky Muslimin
                    </p>
                </div>
            </div>
        </div>
    </main>

    <footer class="creator-footer mt-12 py-6 border-t border-slate-200">
        <div class="max-w-5xl mx-auto px-6 flex flex-col md:flex-row justify-between items-center gap-4">
            <div class="text-center md:text-left">
                <p class="text-xs text-slate-400 font-medium tracking-wide">Developed & Concept by</p>
                <h3 class="text-sm font-extrabold text-indigo-900 tracking-tight">Rizky Muslimin </span></h3>
            </div>
            <div class="flex gap-4">
                <div class="h-8 w-px bg-slate-200 hidden md:block"></div>
                <p class="text-[10px] text-slate-400 max-w-[200px] text-center md:text-right leading-tight">
                    Menggunakan teknologi Computer Vision untuk menyesuaikan warna busana dengan pigmentasi kulit Indonesia.
                </p>
            </div>
        </div>
    </footer>

    <script>
        const video = document.getElementById('video');
        const canvas = document.getElementById('canvas');
        const captureBtn = document.getElementById('captureBtn');
        const resetBtn = document.getElementById('resetBtn');
        const resultArea = document.getElementById('resultArea');
        const guide = document.getElementById('guide');

        async function initCamera() {
            try {
                const stream = await navigator.mediaDevices.getUserMedia({ 
                    video: { facingMode: "user", width: { ideal: 1280 }, height: { ideal: 720 } } 
                });
                video.srcObject = stream;
            } catch (err) {
                alert("Izin kamera diperlukan untuk analisis.");
            }
        }

        captureBtn.addEventListener('click', () => {
            const ctx = canvas.getContext('2d');
            canvas.width = video.videoWidth;
            canvas.height = video.videoHeight;
            ctx.drawImage(video, 0, 0);

            // Sampling area pipi
            const pixelData = ctx.getImageData(canvas.width / 2, canvas.height * 0.55, 1, 1).data;
            runYubeAI(pixelData[0], pixelData[1], pixelData[2]);

            video.classList.add('hidden');
            canvas.classList.remove('hidden');
            guide.classList.add('hidden');
            captureBtn.classList.add('hidden');
            resetBtn.classList.remove('hidden');
            resultArea.classList.remove('hidden');
        });

        resetBtn.addEventListener('click', () => {
            video.classList.remove('hidden');
            canvas.classList.add('hidden');
            guide.classList.remove('hidden');
            captureBtn.classList.remove('hidden');
            resetBtn.classList.add('hidden');
            resultArea.classList.add('hidden');
        });

        function runYubeAI(r, g, b) {
            const hex = "#" + ((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1);
            const label = document.getElementById('skinToneLabel');
            const swatch = document.getElementById('swatch');
            const paletteDiv = document.getElementById('palette');
            const tips = document.getElementById('fashionTips');

            swatch.style.backgroundColor = hex;
            paletteDiv.innerHTML = '';

            const luminance = (0.299 * r + 0.587 * g + 0.114 * b);
            const isWarm = (r > b + 10); 
            
            let season = "";
            let colors = [];
            let advice = "";

            if (isWarm) {
                if (luminance > 145) {
                    season = "Spring Glow";
                    colors = ['#FF9A8B', '#FFD700', '#48D1CC', '#F08080', '#98FB98'];
                    advice = "Warna kulit cerah hangat Anda cocok dengan warna-warna yang 'playful'. Gunakan warna Peach atau Aqua agar wajah terlihat segar dan tidak pucat.";
                } else {
                    season = "Rich Autumn";
                    colors = ['#A52A2A', '#D2691E', '#556B2F', '#B8860B', '#4B3621'];
                    advice = "Sawo matang yang eksotis! Anda akan terlihat sangat berkelas dengan warna-warna Earth Tone seperti Terracotta, Mustard, dan Hijau Botol.";
                }
            } else {
                if (luminance > 145) {
                    season = "Soft Summer";
                    colors = ['#957DAD', '#B0C4DE', '#FFC0CB', '#D8BFD8', '#4682B4'];
                    advice = "Undertone dingin Anda sangat serasi dengan warna pastel. Lavender dan Biru Langit akan membuat kulit Anda terlihat bersih dan anggun.";
                } else {
                    season = "Bold Winter";
                    colors = ['#000080', '#800000', '#006400', '#C0C0C0', '#000000'];
                    advice = "Warna-warna tegas adalah sahabat Anda. Navy, Maroon, dan Hitam pekat akan memberikan kontras yang sempurna dan membuat wajah Anda 'stand out'.";
                }
            }

            label.innerText = season;
            tips.innerText = advice;

            colors.forEach(color => {
                const div = document.createElement('div');
                div.className = "color-dot h-10 w-full rounded-lg shadow-sm border border-white";
                div.style.backgroundColor = color;
                paletteDiv.appendChild(div);
            });
        }

        initCamera();
    </script>
</body>
</html>